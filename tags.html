---
layout: default
title: 태그
permalink: /tags/
---

<div class="tags-page">
    <header class="page-header">
        <h1 class="page-title">태그</h1>
        <p class="page-subtitle">태그별로 정리된 포스트를 확인하세요</p>
    </header>

    <div class="tags-cloud">
        {% for tag in site.tags %}
            <a href="#"
               class="tag-link"
               data-tag="{{ tag[0] }}"
               style="font-size: {{ tag[1].size | times: 0.1 | plus: 0.9 }}rem;">
                {{ tag[0] }} ({{ tag[1].size }})
            </a>
        {% endfor %}
    </div>

    <div id="tag-posts" class="tag-posts-section" style="display: none;">
        <a href="{{ '/tags/' | relative_url }}" class="back-link">← 모든 태그</a>
        <h2 id="tag-title" class="tag-title"></h2>
        <p id="tag-count" class="tag-count"></p>
        <div id="tag-posts-list" class="posts-list"></div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const tagLinks = document.querySelectorAll('.tag-link');
    const tagsCloud = document.querySelector('.tags-cloud');
    const tagPostsSection = document.getElementById('tag-posts');
    const tagTitle = document.getElementById('tag-title');
    const tagCount = document.getElementById('tag-count');
    const tagPostsList = document.getElementById('tag-posts-list');

    // Jekyll에서 생성된 포스트 데이터
    const allPosts = [
        {% for post in site.posts %}
        {
            title: {{ post.title | jsonify }},
            url: {{ post.url | relative_url | jsonify }},
            date: {{ post.date | date: "%Y년 %m월 %d일" | jsonify }},
            tags: {{ post.tags | default: [] | jsonify }},
            description: {{ post.description | default: "" | jsonify }}
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
    ];

    tagLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const selectedTag = this.getAttribute('data-tag');
            showTagPosts(selectedTag);
        });
    });

    function showTagPosts(tag) {
        const filteredPosts = allPosts.filter(post =>
            post.tags && Array.isArray(post.tags) && post.tags.includes(tag)
        );

        tagsCloud.style.display = 'none';
        tagPostsSection.style.display = 'block';
        tagTitle.textContent = tag;
        tagCount.textContent = `총 ${filteredPosts.length}개의 포스트`;

        tagPostsList.innerHTML = '';
        filteredPosts.forEach(post => {
            const postCard = document.createElement('article');
            postCard.className = 'post-card';

            let tagsHtml = '';
            if (post.tags && post.tags.length > 0) {
                tagsHtml = '<div class="post-card-tags">';
                post.tags.forEach(t => {
                    tagsHtml += `<a href="#" class="tag-badge" data-tag="${t}">${t}</a>`;
                });
                tagsHtml += '</div>';
            }

            postCard.innerHTML = `
                <a href="${post.url}" class="post-card-link">
                    <h2 class="post-card-title">${post.title}</h2>
                </a>
                <div class="post-card-meta">
                    <time datetime="${post.date}" class="post-card-date">${post.date}</time>
                    ${tagsHtml}
                </div>
                ${post.description ? `<p class="post-card-description">${post.description}</p>` : ''}
            `;

            tagPostsList.appendChild(postCard);
        });

        // 태그 클릭 이벤트 추가
        tagPostsList.querySelectorAll('.tag-badge').forEach(badge => {
            badge.addEventListener('click', function(e) {
                e.preventDefault();
                const newTag = this.getAttribute('data-tag');
                showTagPosts(newTag);
            });
        });
    }

    // 브라우저 뒤로가기 처리
    window.addEventListener('popstate', function(e) {
        if (e.state && e.state.tag) {
            showTagPosts(e.state.tag);
        } else {
            tagsCloud.style.display = 'flex';
            tagPostsSection.style.display = 'none';
        }
    });
});
</script>

<style>
.tags-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: center;
    padding: 2rem 0;
}

.tag-link {
    display: inline-block;
    padding: 0.5rem 1rem;
    background-color: #f8f9fa;
    color: #495057;
    text-decoration: none;
    border-radius: 20px;
    transition: all 0.2s;
    border: 2px solid transparent;
    cursor: pointer;
}

.tag-link:hover {
    background-color: #007bff;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.tag-posts-section {
    margin-top: 2rem;
}

.back-link {
    display: inline-block;
    margin-bottom: 1rem;
    color: #007bff;
    text-decoration: none;
    font-size: 0.9rem;
    transition: color 0.2s;
}

.back-link:hover {
    color: #0056b3;
}

.tag-title {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    color: #3d4144;
}

.tag-count {
    color: #6c757d;
    font-size: 0.9rem;
    margin-bottom: 2rem;
}

.posts-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}
</style>

